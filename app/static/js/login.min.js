(()=>{"use strict";function t(t,e){let n=document.getElementById(`${t}-error`);if(!n)if(n=function(t,e){const n=document.createElement("label");return n.id=`${t}-error`,n.htmlFor=t,n.className="error",n.textContent=e,n}(t,e),"terms"===t){document.querySelector(".form__terms-container").insertAdjacentElement("afterend",n)}else{document.getElementById(t).after(n)}n.textContent=e}function e(t){const e=document.getElementById(`${t}-error`);e&&e.remove()}var n=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))};const r=document.querySelector("form"),o=document.getElementById("email"),a=document.getElementById("password");r.addEventListener("submit",(i=>n(void 0,void 0,void 0,(function*(){i.preventDefault();const n=new FormData(r);let s=!0;const c=n.get("email").trim(),d=n.get("password");if(c?!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)||c.length>64||c.length<5?(s=!1,t("email",o.getAttribute("data-msg-invalid"))):e("email"):(s=!1,t("email",o.getAttribute("data-msg-required"))),!d||d.length<8||d.length>256?(s=!1,t("password",a.getAttribute("data-msg-required"))):e("password"),!s)return;!function(){const t=document.createElement("div");t.className="loader";const e=document.querySelector("button");e.disabled=!0,e.dataset.message=e.textContent,e.textContent="",e.appendChild(t)}();let m=JSON.stringify(Object.fromEntries(n.entries())),u=yield fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:m});const l=(yield u.json()).errors;switch(u.status){case 422:l.forEach((e=>{"email"===e.type&&t("email",o.getAttribute("data-msg-invalid"))}));break;case 401:t("password",a.getAttribute("data-msg-incorrect")),t("email",o.getAttribute("data-msg-incorrect"))}!function(){const t=document.querySelector("button");t.disabled=!1,t.textContent=t.dataset.message,t.removeAttribute("data-message")}()}))))})();